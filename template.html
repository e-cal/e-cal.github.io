<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ecal.dev</title>
  $for(css)$
  <link rel="stylesheet" href="$css$" />
  $endfor$
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script> 

  <script type="module">
    import { codeToHtml } from "https://esm.sh/shiki@1.0.0";

async function highlightCode() {
  const codeBlocks = document.querySelectorAll(".code-block");
  for (const block of codeBlocks) {
    const code = block.textContent;
    const lang = block.getAttribute("data-lang");
    
    // Split into lines and remove 4 spaces from each line after first
    const lines = code.split('\n');
    const dedented = lines[0] + '\n' + lines.slice(1).map(line => line.slice(4)).join('\n');
    
    block.innerHTML = await codeToHtml(dedented, {
      lang: lang,
      theme: "catppuccin-mocha",
    });
  }
}

    highlightCode();
  </script>
  </head>
  <body>
    <header>
      <!-- Your header content here -->
      <nav>
        <a href="/">Home</a>
        <a href="/about">About</a>
      </nav>
    </header>

    $body$
  </body>
</html>
